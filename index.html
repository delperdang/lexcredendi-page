<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lex Credendi Catholic Resource Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        html.dark ::-webkit-scrollbar-track {
            background: #2d3748;
        }
        html.dark ::-webkit-scrollbar-thumb {
            background: #718096;
        }
        html.dark ::-webkit-scrollbar-thumb:hover {
            background: #a0aec0;
        }

        body {
            font-family: 'Inter', sans-serif;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .bg-theme-primary { background-color: #ffffff; }
        .text-theme-primary { color: #1f2937; }
        .text-theme-secondary { color: #4b5563; }
        .border-theme-primary { border-color: #e5e7eb; }
        .card-theme-bg { background-color: #f9fafb; }
        .card-theme-hover-bg:hover { background-color: #f3f4f6; }
        .button-theme { background-color: #3b82f6; color: #ffffff; }
        .button-theme:hover { background-color: #2563eb; }
        .nav-link-theme { color: #374151; }
        .nav-link-theme:hover { color: #1d4ed8; }
        .active-nav-link-theme { color: #1d4ed8; font-weight: 600; }
        .meditation-theme-bg { background: radial-gradient(circle, #a7c5eb 0%, #6495ed 100%); }
        .section-bg-alt { background-color: #f9fafb; }

        html.dark .bg-theme-primary { background-color: #111827; }
        html.dark .text-theme-primary { color: #f3f4f6; }
        html.dark .text-theme-secondary { color: #9ca3af; }
        html.dark .border-theme-primary { border-color: #374151; }
        html.dark .card-theme-bg { background-color: #1f2937; }
        html.dark .card-theme-hover-bg:hover { background-color: #374151; }
        html.dark .button-theme { background-color: #60a5fa; color: #111827; }
        html.dark .button-theme:hover { background-color: #3b82f6; }
        html.dark .nav-link-theme { color: #d1d5db; }
        html.dark .nav-link-theme:hover { color: #93c5fd; }
        html.dark .active-nav-link-theme { color: #93c5fd; font-weight: 600; }
        html.dark .meditation-theme-bg { background: radial-gradient(circle, #4a5568 0%, #2c3e50 100%); }
        html.dark .section-bg-alt { background-color: #1f2937; }

        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out, padding 0.3s ease-out;
            padding-top: 0;
            padding-bottom: 0;
        }
        .accordion-content.open {
            max-height: 1000px;
            padding-top: 1rem;
            padding-bottom: 1rem;
        }

        .breathing-circle {
            width: 250px;
            height: 250px;
            border-radius: 50%;
            animation: breath 8s ease-in-out infinite;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        @keyframes breath {
            0%, 100% { transform: scale(0.8); opacity: 0.7; }
            50% { transform: scale(1); opacity: 1; }
        }
        .meditation-text {
            animation: fadeInOut 8s ease-in-out infinite;
        }
        @keyframes fadeInOut {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        .rosary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }
        .rosary-image-container {
            position: relative;
            overflow: hidden;
            border-radius: 0.5rem;
        }
        .rosary-image-container img {
            transition: transform 0.3s ease;
        }
        .rosary-image-container:hover img {
            transform: scale(1.05);
        }
        .rosary-mystery-name {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: rgba(0, 0, 0, 0.6);
            color: white;
            padding: 0.5rem;
            text-align: center;
            font-size: 0.875rem;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .rosary-image-container:hover .rosary-mystery-name {
            opacity: 1;
        }

        .tab-active {
            border-bottom-width: 2px;
            border-color: #3b82f6;
            color: #3b82f6;
        }
        html.dark .tab-active {
            border-color: #60a5fa;
            color: #60a5fa;
        }

        .card {
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            transition: box-shadow 0.3s ease;
        }
        .card:hover {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        section {
            padding-top: 4rem;
            padding-bottom: 4rem;
        }
        
        header {
            position: sticky;
            top: 0;
            z-index: 50;
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
        }

        .search-input-theme {
            background-color: #ffffff;
            border-color: #e5e7eb;
            color: #1f2937;
        }
        .search-input-theme::placeholder {
            color: #9ca3af;
        }
        html.dark .search-input-theme {
            background-color: #374151;
            border-color: #4b5563;
            color: #f3f4f6;
        }
        html.dark .search-input-theme::placeholder {
            color: #6b7280;
        }

    </style>
</head>
<body class="bg-theme-primary text-theme-primary">

    <header id="mainHeader" class="bg-theme-primary shadow-md">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-20">
                <div class="flex-shrink-0">
                    <a href="#" class="text-2xl font-bold text-theme-primary">Lex Credendi Hub</a>
                </div>

                <nav class="hidden md:flex space-x-6 items-center">
                    <a href="#prayers" class="nav-link-theme hover:text-theme-secondary px-3 py-2 rounded-md text-sm font-medium">Prayers</a>
                    <a href="#apologetics" class="nav-link-theme hover:text-theme-secondary px-3 py-2 rounded-md text-sm font-medium">Apologetics</a>
                    <a href="#doctrine" class="nav-link-theme hover:text-theme-secondary px-3 py-2 rounded-md text-sm font-medium">Doctrine</a>
                    <a href="#bible-in-year" class="nav-link-theme hover:text-theme-secondary px-3 py-2 rounded-md text-sm font-medium">Bible</a>
                    <a href="#catechism-in-year" class="nav-link-theme hover:text-theme-secondary px-3 py-2 rounded-md text-sm font-medium">Catechism</a>
                    <a href="#meditation" class="nav-link-theme hover:text-theme-secondary px-3 py-2 rounded-md text-sm font-medium">Meditation</a>
                    <a href="#rosary" class="nav-link-theme hover:text-theme-secondary px-3 py-2 rounded-md text-sm font-medium">Rosary</a>
                    <a href="#useful-links" class="nav-link-theme hover:text-theme-secondary px-3 py-2 rounded-md text-sm font-medium">Links</a>
                    
                    <button id="theme-toggle" type="button" class="text-theme-secondary hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 rounded-lg text-sm p-2.5">
                        <svg id="theme-toggle-dark-icon" class="hidden w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg>
                        <svg id="theme-toggle-light-icon" class="hidden w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" fill-rule="evenodd" clip-rule="evenodd"></path></svg>
                    </button>
                </nav>

                <div class="md:hidden flex items-center">
                    <button id="theme-toggle-mobile" type="button" class="mr-2 text-theme-secondary hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 rounded-lg text-sm p-2.5">
                         <svg id="theme-toggle-dark-icon-mobile" class="hidden w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg>
                        <svg id="theme-toggle-light-icon-mobile" class="hidden w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" fill-rule="evenodd" clip-rule="evenodd"></path></svg>
                    </button>
                    <button id="mobile-menu-button" class="inline-flex items-center justify-center p-2 rounded-md text-theme-secondary hover:text-theme-primary hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500">
                        <span class="sr-only">Open main menu</span>
                        <svg class="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                        <svg class="hidden h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <div class="md:hidden hidden" id="mobile-menu">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="#prayers" class="nav-link-theme hover:bg-gray-50 dark:hover:bg-gray-700 block px-3 py-2 rounded-md text-base font-medium">Prayers</a>
                <a href="#apologetics" class="nav-link-theme hover:bg-gray-50 dark:hover:bg-gray-700 block px-3 py-2 rounded-md text-base font-medium">Apologetics</a>
                <a href="#doctrine" class="nav-link-theme hover:bg-gray-50 dark:hover:bg-gray-700 block px-3 py-2 rounded-md text-base font-medium">Doctrine</a>
                <a href="#bible-in-year" class="nav-link-theme hover:bg-gray-50 dark:hover:bg-gray-700 block px-3 py-2 rounded-md text-base font-medium">Bible</a>
                <a href="#catechism-in-year" class="nav-link-theme hover:bg-gray-50 dark:hover:bg-gray-700 block px-3 py-2 rounded-md text-base font-medium">Catechism</a>
                <a href="#meditation" class="nav-link-theme hover:bg-gray-50 dark:hover:bg-gray-700 block px-3 py-2 rounded-md text-base font-medium">Meditation</a>
                <a href="#rosary" class="nav-link-theme hover:bg-gray-50 dark:hover:bg-gray-700 block px-3 py-2 rounded-md text-base font-medium">Rosary</a>
                <a href="#useful-links" class="nav-link-theme hover:bg-gray-50 dark:hover:bg-gray-700 block px-3 py-2 rounded-md text-base font-medium">Links</a>
            </div>
        </div>
    </header>

    <main>
        <section id="hero" class="bg-theme-primary py-16 md:py-24">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8 text-center">
                <h1 class="text-4xl sm:text-5xl md:text-6xl font-extrabold text-theme-primary">
                    Lex Credendi
                </h1>
                <p class="mt-4 text-lg sm:text-xl text-theme-secondary max-w-2xl mx-auto">
                    Your comprehensive hub for Catholic prayers, apologetics, doctrine, and spiritual resources.
                </p>
                 <p class="mt-2 text-sm text-theme-secondary max-w-2xl mx-auto">
                    <i>"The law of prayer is the law of belief."</i>
                </p>
            </div>
        </section>

        <section id="prayers" class="section-bg-alt">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-3xl font-bold text-theme-primary mb-8 text-center">Prayers</h2>
                <div id="prayers-list" class="space-y-6">
                    </div>
            </div>
        </section>

        <section id="apologetics" class="bg-theme-primary">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-3xl font-bold text-theme-primary mb-8 text-center">Apologetics</h2>
                <div id="apologetics-list" class="space-y-4">
                     </div>
            </div>
        </section>

        <section id="doctrine" class="section-bg-alt">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-3xl font-bold text-theme-primary mb-8 text-center">Doctrine</h2>
                <div id="doctrine-list" class="space-y-4">
                    </div>
            </div>
        </section>

        <section id="bible-in-year" class="bg-theme-primary">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-3xl font-bold text-theme-primary mb-8 text-center">Bible in a Year</h2>
                <input type="text" id="bible-search" placeholder="Search by Day (e.g., Day 1) or Reading (e.g. Genesis 1)" class="search-input-theme w-full p-3 mb-6 border rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500">
                <div id="bible-in-year-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    </div>
            </div>
        </section>

        <section id="catechism-in-year" class="section-bg-alt">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-3xl font-bold text-theme-primary mb-8 text-center">Catechism in a Year</h2>
                 <input type="text" id="catechism-search" placeholder="Search by Day (e.g., Day 1) or Paragraph (e.g. CCC 1)" class="search-input-theme w-full p-3 mb-6 border rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500">
                <div id="catechism-in-year-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    </div>
            </div>
        </section>

        <section id="meditation" class="bg-theme-primary">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-3xl font-bold text-theme-primary mb-12 text-center">Meditation</h2>
                <div class="flex flex-col items-center justify-center min-h-[300px]">
                    <div class="breathing-circle meditation-theme-bg mb-6">
                        <p class="meditation-text text-lg font-semibold text-white dark:text-gray-200 p-4">
                            Lord Jesus Christ, Son of God, have mercy on me, a sinner.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <section id="rosary" class="section-bg-alt">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-3xl font-bold text-theme-primary mb-8 text-center">The Holy Rosary</h2>
                <div id="rosary-albums" class="space-y-10">
                    </div>
            </div>
        </section>

        <section id="useful-links" class="bg-theme-primary">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-3xl font-bold text-theme-primary mb-8 text-center">Useful Links</h2>
                <ul id="useful-links-list" class="space-y-3 max-w-md mx-auto">
                    </ul>
            </div>
        </section>
    </main>

    <footer class="bg-gray-100 dark:bg-gray-900 border-t border-theme-primary mt-12">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 text-center text-theme-secondary">
            <p>&copy; <span id="currentYear"></span> Lex Credendi Catholic Resource Hub. All Rights Reserved.</p>
            <p class="text-xs mt-1">Ad Majorem Dei Gloriam</p>
        </div>
    </footer>

    <script>
        // --- Theme Toggle ---
        const themeToggleBtn = document.getElementById('theme-toggle');
        const themeToggleMobileBtn = document.getElementById('theme-toggle-mobile');
        const themeToggleDarkIcon = document.getElementById('theme-toggle-dark-icon');
        const themeToggleLightIcon = document.getElementById('theme-toggle-light-icon');
        const themeToggleDarkIconMobile = document.getElementById('theme-toggle-dark-icon-mobile');
        const themeToggleLightIconMobile = document.getElementById('theme-toggle-light-icon-mobile');

        function applyTheme(isDark) {
            if (isDark) {
                document.documentElement.classList.add('dark');
                themeToggleLightIcon.classList.remove('hidden');
                themeToggleDarkIcon.classList.add('hidden');
                themeToggleLightIconMobile.classList.remove('hidden');
                themeToggleDarkIconMobile.classList.add('hidden');
            } else {
                document.documentElement.classList.remove('dark');
                themeToggleLightIcon.classList.add('hidden');
                themeToggleDarkIcon.classList.remove('hidden');
                themeToggleLightIconMobile.classList.add('hidden');
                themeToggleDarkIconMobile.classList.remove('hidden');
            }
        }
        
        if (localStorage.getItem('color-theme') === 'dark' || 
            (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            applyTheme(true);
        } else {
            applyTheme(false);
        }

        const toggleTheme = () => {
            const isDarkNow = document.documentElement.classList.toggle('dark');
            localStorage.setItem('color-theme', isDarkNow ? 'dark' : 'light');
            applyTheme(isDarkNow);
            updateActiveLink(); 
        };

        themeToggleBtn.addEventListener('click', toggleTheme);
        themeToggleMobileBtn.addEventListener('click', toggleTheme);

        // --- Mobile Menu ---
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        const mobileMenuLinks = mobileMenu.querySelectorAll('a');

        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
            mobileMenuButton.querySelectorAll('svg').forEach(icon => icon.classList.toggle('hidden'));
        });

        mobileMenuLinks.forEach(link => {
            link.addEventListener('click', () => {
                if (!mobileMenu.classList.contains('hidden')) {
                    mobileMenu.classList.add('hidden');
                    mobileMenuButton.querySelectorAll('svg').forEach(icon => icon.classList.toggle('hidden'));
                }
            });
        });
        
        // --- Smooth Scrolling & Active Nav Link ---
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                const href = this.getAttribute('href');
                if (href === "#") { 
                    e.preventDefault();
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                } else {
                    const targetElement = document.querySelector(href);
                    if (targetElement) {
                        e.preventDefault();
                        const headerOffset = document.getElementById('mainHeader').offsetHeight;
                        const elementPosition = targetElement.getBoundingClientRect().top;
                        const offsetPosition = elementPosition + window.pageYOffset - headerOffset;
        
                        window.scrollTo({
                            top: offsetPosition,
                            behavior: 'smooth'
                        });
                    }
                }
            });
        });

        const sections = document.querySelectorAll('main section');
        const navLinks = document.querySelectorAll('header nav a, #mobile-menu a');
        const mainHeader = document.getElementById('mainHeader');

        function updateActiveLink() {
            let currentSectionId = '';
            const headerHeight = mainHeader.offsetHeight;

            sections.forEach(section => {
                const sectionTop = section.offsetTop - headerHeight - 50; 
                if (window.pageYOffset >= sectionTop) {
                    currentSectionId = section.getAttribute('id');
                }
            });

            navLinks.forEach(link => {
                link.classList.remove('active-nav-link-theme', 'font-semibold');
                link.classList.remove('active-nav-link-light', 'active-nav-link-dark'); 
                
                if (link.getAttribute('href') === `#${currentSectionId}`) {
                    link.classList.add('active-nav-link-theme', 'font-semibold');
                }
            });
        }
        window.addEventListener('scroll', updateActiveLink);
        window.addEventListener('load', updateActiveLink); 

        // --- CSV Data ---
        const prayerDataCSV = `Prayer_Title_EN,Prayer_Text_EN,Prayer_Title_LA,Prayer_Text_LA
Morning Offering,Lord Jesus Christin union with that divine intention wherewith on earth Thou didst offer to God Thy praises through Thy Most Sacred Heart and dost now offer them in the Sacrament of the Eucharist everywhere on earth even to the end of time I most gladly offer Thee throughout this entire day all my thoughts and intentions all my affections and desires all my words and deeds in imitation of the most sacred Heart of the blessed and ever Virgin Mary Immaculate. Amen.,Morning Offering (Latin),Domine Iesu Christe in unione illius divinae intentionis quia in terris per sanctissimum Cor tuum laudes Deo persolvisti et nunc in Eucharistiae Sacramento ubique terrarum persolvis usque ad consummationem saeculi ego per hanc diem integram ad imitationem sanctissimi Cordis beatae Mariae semper Virginis immaculatae tibi libentissime offero omnes meos intentiones et cogitationes omnes meos affectus et desideria omnia mea opera et verba. Amen.
Prayer to Saint Michael,Saint Michael the Archangel<br>defend us in battle<br>be our protection against the wickedness and snares of the devil<br>may God rebuke him we humbly pray<br>and do thou O Prince of the heavenly host<br>by the power of God cast into hell<br>Satan and all the evil spirits<br>who prowl through the world seeking the ruin of souls.<br>Amen.,Oratio ad Sanctum Michael,Sancte Michael Archangele<br>defende nos in proelio<br>contra nequitiam et insidias diaboli esto praesidium.<br>Imperet illi Deus supplices deprecamur:<br>tuque Princeps militiae caelestis<br>Satanam aliosque spiritus malignos<br>qui ad perditionem animarum pervagantur in mundo<br>divina virtue in infernum detrude.<br>Amen.`;

        const apologeticsDataCSV = `Topic_Title,Topic_Content_With_Linked_References
Life begins at conception,<a href=https://bible.usccb.org/bible/job/31>Job 31:15</a> – God made you in the womb…formed us in our mothers<br><a href=https://bible.usccb.org/bible/psalms/22>Ps 22:9-10</a> – “from my mother’s womb you have been my God”<br><a href=https://bible.usccb.org/bible/psalms/139>Ps 139:13-16</a> – “you knit me together in my mother’s womb…your eyes saw my unformed body”<br><a href=https://bible.usccb.org/bible/isaiah/44>Is 44:2</a>; <a href=https://bible.usccb.org/bible/isaiah/49>Is 49:5</a> – the Lord formed you in the womb<br><a href=https://bible.usccb.org/bible/isaiah/46>Is 46:3-4</a> – “I have upheld you since you were conceived”<br><a href=https://bible.usccb.org/bible/jeremiah/1>Jer 1:4-5</a> – “before you were born I set you apart”<br><a href=https://bible.usccb.org/bible/luke/1>Lk 1:41</a> – “the baby leapt in her womb”
We should be involved in pro-life causes,<a href=https://bible.usccb.org/bible/exodus/20>Ex 20:13</a> – Thou shalt not murder<br><a href=https://bible.usccb.org/bible/psalms/82>Ps 82:3-4</a> – defend the weak and fatherless<br><a href=https://bible.usccb.org/bible/proverbs/24>Prov 24:11-12</a> – rescue those being led away to death`;

        const doctrineDataCSV = `Formula_Title,Formula_Content
Heresies,Docetism teaches that Jesus only appeared to be human. On the contrary the Catholic Church teaches that Christ if fully God and fully man.<br>Arianism teaches that Jesus not fully God. On the contrary the Catholic Church teaches that Christ if fully God and fully man.<br>Nestorianism teaches that Jesus is two “persons” - Jesus the human son of Mary and Jesus the divine Son of God. On the contrary the Catholic Church teaches that Christ is one person with two natures: divine nature and human nature.<br>Monophysitism teaches that Jesus is fully God but not fully man. The Catholic Church teaches that Christ has two natures: divine nature and human nature.<br>Monothelitism teaches that Jesus has only one will. The Catholic Church teaches that Christ has two wills: a divine will and a human will belonging to His human soul.<br>Iconoclasm teaches that images are idolatrous. On the contrary the Catholic Church defends the use of Christian (not pagan) images since Christ became visible through the incarnation.<br>Pelagianism denies original sin and teaches that grace is not necessary for salvation. The Catholic Church teaches that we are born in original sin and saved by grace through faith and works.
Who is Jesus?,Second Person of the Trinity<br>One divine person with two natures (divine & human)<br>Christ and Messiah (Son of David)<br>Rose from the dead and is seated at Father’s right hand`;

        const bibleInYearDataCSV = `Day_Title,Bible_Passages
Day 1 - Early World,<a href=https://bible.usccb.org/bible/genesis/1>Genesis 1</a>–2 <a href=https://bible.usccb.org/bible/psalms/19>Psalm 19</a><br><a href=https://dts.podtrac.com/redirect.mp3/aphid.fireside.fm/d/1437767933/c6354d0d-bd10-4eed-b811-1bb569d46efd/3eb220b4-a884-4f10-ae77-84c159309c9d.mp3>Click to Play Podcast</a>
Day 2 - Early World,<a href=https://bible.usccb.org/bible/genesis/3>Genesis 3</a>–4 <a href=https://bible.usccb.org/bible/psalms/104>Psalm 104</a><br><a href=https://dts.podtrac.com/redirect.mp3/aphid.fireside.fm/d/1437767933/c6354d0d-bd10-4eed-b811-1bb569d46efd/890f7a15-b8e3-427f-9657-c53184a4289c.mp3>Click to Play Podcast</a>`;

        const catechismInYearDataCSV = `Day_Title,Catechism_Paragraphs
Day 1 - Prologue,<a href=https://www.vatican.va/archive/ENG0015/__P2.HTM>CCC 1</a>-10<br><a href=https://dts.podtrac.com/redirect.mp3/aphid.fireside.fm/d/1437767933/cdfbae20-3944-4880-bb6c-5860a901b00a/b8cb3586-04ca-41f2-81bb-0a12ba5b1961.mp3>Click to Play Podcast</a>
Day 2 - Prologue,<a href=https://www.vatican.va/archive/ENG0015/__P4.HTM>CCC 11</a>-25<br><a href=https://dts.podtrac.com/redirect.mp3/aphid.fireside.fm/d/1437767933/cdfbae20-3944-4880-bb6c-5860a901b00a/691b2139-13b1-4e7e-a8e6-f63a5db3a073.mp3>Click to Play Podcast</a>`;

        function parseCSV(csvText) {
            const lines = csvText.trim().split('\n');
            const headers = lines[0].split(',').map(header => header.trim());
            const records = [];
            for (let i = 1; i < lines.length; i++) {
                const values = lines[i].split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/).map(value => value.trim().replace(/^"|"$/g, ''));
                if (values.length === headers.length) {
                    const record = {};
                    headers.forEach((header, index) => {
                        record[header] = values[index];
                    });
                    records.push(record);
                }
            }
            return records;
        }

        const prayersList = document.getElementById('prayers-list');
        const prayers = parseCSV(prayerDataCSV);
        prayers.forEach((prayer, index) => {
            const prayerId = `prayer-${index}`;
            const card = document.createElement('div');
            card.className = 'card card-theme-bg p-6 shadow-lg rounded-xl'; 
            card.innerHTML = `
                <div class="flex justify-between items-center mb-3">
                    <h3 class="text-xl font-semibold text-theme-primary prayer-title-en">${prayer.Prayer_Title_EN}</h3>
                    <h3 class="text-xl font-semibold text-theme-primary prayer-title-la hidden">${prayer.Prayer_Title_LA}</h3>
                    <div class="flex space-x-2">
                        <button data-lang="en" class="lang-toggle-btn text-xs px-3 py-1 rounded-md bg-blue-500 text-white dark:bg-blue-400 dark:text-gray-900 opacity-100" aria-pressed="true">EN</button>
                        <button data-lang="la" class="lang-toggle-btn text-xs px-3 py-1 rounded-md bg-gray-200 dark:bg-gray-600 text-theme-primary opacity-70" aria-pressed="false">LA</button>
                    </div>
                </div>
                <div class="prayer-text-en text-theme-secondary leading-relaxed">${prayer.Prayer_Text_EN}</div>
                <div class="prayer-text-la text-theme-secondary leading-relaxed hidden">${prayer.Prayer_Text_LA}</div>
            `;
            prayersList.appendChild(card);

            const langToggleButtons = card.querySelectorAll('.lang-toggle-btn');
            const titleEn = card.querySelector('.prayer-title-en');
            const titleLa = card.querySelector('.prayer-title-la');
            const textEn = card.querySelector('.prayer-text-en');
            const textLa = card.querySelector('.prayer-text-la');

            langToggleButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const lang = button.dataset.lang;
                    langToggleButtons.forEach(btn => {
                        btn.classList.remove('bg-blue-500', 'text-white', 'dark:bg-blue-400', 'dark:text-gray-900', 'opacity-100');
                        btn.classList.add('bg-gray-200', 'dark:bg-gray-600', 'text-theme-primary', 'opacity-70');
                        btn.setAttribute('aria-pressed', 'false');
                    });
                    button.classList.add('bg-blue-500', 'text-white', 'dark:bg-blue-400', 'dark:text-gray-900', 'opacity-100');
                    button.classList.remove('bg-gray-200', 'dark:bg-gray-600', 'text-theme-primary', 'opacity-70');
                    button.setAttribute('aria-pressed', 'true');

                    if (lang === 'en') {
                        titleEn.classList.remove('hidden');
                        titleLa.classList.add('hidden');
                        textEn.classList.remove('hidden');
                        textLa.classList.add('hidden');
                    } else {
                        titleEn.classList.add('hidden');
                        titleLa.classList.remove('hidden');
                        textEn.classList.add('hidden');
                        textLa.classList.remove('hidden');
                    }
                });
            });
        });

        const apologeticsList = document.getElementById('apologetics-list');
        const apologeticsTopics = parseCSV(apologeticsDataCSV);
        apologeticsTopics.forEach((topic, index) => {
            const topicId = `apologetics-${index}`;
            const item = document.createElement('div');
            item.className = 'card card-theme-bg rounded-lg shadow-md';
            item.innerHTML = `
                <button class="accordion-toggle w-full flex justify-between items-center p-5 text-left font-medium text-theme-primary card-theme-hover-bg focus:outline-none" aria-expanded="false" aria-controls="${topicId}-content">
                    <span>${topic.Topic_Title}</span>
                    <svg class="w-5 h-5 shrink-0 transform transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </button>
                <div id="${topicId}-content" class="accordion-content px-5 text-theme-secondary leading-relaxed">
                    ${topic.Topic_Content_With_Linked_References}
                </div>
            `;
            apologeticsList.appendChild(item);
        });

        const doctrineList = document.getElementById('doctrine-list');
        const doctrineFormulas = parseCSV(doctrineDataCSV);
        doctrineFormulas.forEach((formula, index) => {
            const formulaId = `doctrine-${index}`;
            const item = document.createElement('div');
            item.className = 'card card-theme-bg rounded-lg shadow-md';
            item.innerHTML = `
                <button class="accordion-toggle w-full flex justify-between items-center p-5 text-left font-medium text-theme-primary card-theme-hover-bg focus:outline-none" aria-expanded="false" aria-controls="${formulaId}-content">
                    <span>${formula.Formula_Title}</span>
                     <svg class="w-5 h-5 shrink-0 transform transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </button>
                <div id="${formulaId}-content" class="accordion-content px-5 text-theme-secondary leading-relaxed">
                    ${formula.Formula_Content}
                </div>
            `;
            doctrineList.appendChild(item);
        });
        
        document.querySelectorAll('.accordion-toggle').forEach(button => {
            button.addEventListener('click', () => {
                const content = document.getElementById(button.getAttribute('aria-controls'));
                const isExpanded = button.getAttribute('aria-expanded') === 'true';
                button.setAttribute('aria-expanded', !isExpanded);
                content.classList.toggle('open');
                button.querySelector('svg').classList.toggle('rotate-180');
            });
        });

        const bibleInYearList = document.getElementById('bible-in-year-list');
        let allBibleReadings = parseCSV(bibleInYearDataCSV); 

        function displayBibleReadings(readings) {
            bibleInYearList.innerHTML = '';
            readings.forEach(reading => {
                const card = document.createElement('div');
                card.className = 'card card-theme-bg p-5 shadow-lg rounded-xl flex flex-col';
                card.innerHTML = `
                    <h4 class="text-lg font-semibold text-theme-primary mb-1">${reading.Day_Title}</h4>
                    <p class="text-sm text-theme-secondary mb-2 flex-grow">
                        ${reading.Bible_Passages}
                    </p>
                `;
                bibleInYearList.appendChild(card);
            });
        }
        displayBibleReadings(allBibleReadings);

        const bibleSearchInput = document.getElementById('bible-search');
        bibleSearchInput.addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase();
            const filteredReadings = allBibleReadings.filter(r => 
                r.Day_Title.toLowerCase().includes(searchTerm) ||
                r.Bible_Passages.toLowerCase().includes(searchTerm)
            );
            displayBibleReadings(filteredReadings);
        });

        const catechismInYearList = document.getElementById('catechism-in-year-list');
        let allCatechismReadings = parseCSV(catechismInYearDataCSV);

        function displayCatechismReadings(readings) {
            catechismInYearList.innerHTML = '';
            readings.forEach(reading => {
                const card = document.createElement('div');
                card.className = 'card card-theme-bg p-5 shadow-lg rounded-xl flex flex-col';
                card.innerHTML = `
                    <h4 class="text-lg font-semibold text-theme-primary mb-1">${reading.Day_Title}</h4>
                    <p class="text-sm text-theme-secondary flex-grow">
                        Paragraphs: ${reading.Catechism_Paragraphs}
                    </p>
                `;
                catechismInYearList.appendChild(card);
            });
        }
        displayCatechismReadings(allCatechismReadings);

        const catechismSearchInput = document.getElementById('catechism-search');
        catechismSearchInput.addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase();
            const filteredReadings = allCatechismReadings.filter(r => 
                r.Day_Title.toLowerCase().includes(searchTerm) ||
                r.Catechism_Paragraphs.toLowerCase().includes(searchTerm)
            );
            displayCatechismReadings(filteredReadings);
        });

        const rosaryAlbumsContainer = document.getElementById('rosary-albums');
        const rosaryAlbums = [ 
            { name: "Luminous Mysteries", description: "Luminous Mysteries", images: [
                { src: "https://ik.imagekit.io/qy6hiycaw/luminous_01.jpg", name: "The Baptism of Christ" },
                { src: "https://ik.imagekit.io/qy6hiycaw/luminous_02.jpg", name: "The Wedding Feast at Cana" },
                { src: "https://ik.imagekit.io/qy6hiycaw/luminous_03.jpg", name: "The Proclamation of the Kingdom" },
                { src: "https://ik.imagekit.io/qy6hiycaw/luminous_04.jpg", name: "The Transfiguration" },
                { src: "https://ik.imagekit.io/qy6hiycaw/luminous_05.jpg", name: "The Institution of the Eucharist" }
            ]},
            { name: "Glorious Mysteries", description: "Glorious Mysteries", images: [
                { src: "https://ik.imagekit.io/qy6hiycaw/glorious_01.jpg", name: "The Resurrection" },
                { src: "https://ik.imagekit.io/qy6hiycaw/glorious_02.jpg", name: "The Ascension" },
                { src: "https://ik.imagekit.io/qy6hiycaw/glorious_03.jpg", name: "The Descent of the Holy Spirit" },
                { src: "https://ik.imagekit.io/qy6hiycaw/glorious_04.jpg", name: "The Assumption" },
                { src: "https://ik.imagekit.io/qy6hiycaw/glorious_05.jpg", name: "The Coronation of Mary" }
            ]},
            { name: "Joyful Mysteries", description: "Joyful Mysteries", images: [
                { src: "https://ik.imagekit.io/qy6hiycaw/joyful_01.jpg", name: "The Annunciation" },
                { src: "https://ik.imagekit.io/qy6hiycaw/joyful_02.jpg", name: "The Visitation" },
                { src: "https://ik.imagekit.io/qy6hiycaw/joyful_03.jpg", name: "The Nativity" },
                { src: "https://ik.imagekit.io/qy6hiycaw/joyful_04.jpg", name: "The Presentation in the Temple" },
                { src: "https://ik.imagekit.io/qy6hiycaw/joyful_05.jpg", name: "The Finding in the Temple" }
            ]},
            { name: "Sorrowful Mysteries", description: "Sorrowful Mysteries", images: [
                { src: "https://ik.imagekit.io/qy6hiycaw/sorrowful_01.jpg", name: "The Agony in the Garden" },
                { src: "https://ik.imagekit.io/qy6hiycaw/sorrowful_02.jpg", name: "The Scourging at the Pillar" },
                { src: "https://ik.imagekit.io/qy6hiycaw/sorrowful_03.jpg", name: "The Crowning with Thorns" },
                { src: "https://ik.imagekit.io/qy6hiycaw/sorrowful_04.jpg", name: "The Carrying of the Cross" },
                { src: "https://ik.imagekit.io/qy6hiycaw/sorrowful_05.jpg", name: "The Crucifixion and Death" }
            ]},
        ];
      
        rosaryAlbums.forEach(album => {
            const albumDiv = document.createElement('div');
            albumDiv.className = 'mb-10';
            albumDiv.innerHTML = `<h3 class="text-2xl font-semibold text-theme-primary mb-6 text-center">${album.description}</h3>`;
            
            const gridDiv = document.createElement('div');
            gridDiv.className = 'rosary-grid';

            album.images.forEach(image => {
                const imageContainer = document.createElement('div');
                imageContainer.className = 'rosary-image-container card card-theme-bg shadow-md overflow-hidden aspect-w-4 aspect-h-3 md:aspect-w-1 md:aspect-h-1';
                imageContainer.innerHTML = `
                    <img src="${image.src}" alt="${image.name}" class="object-cover w-full h-full" onerror="this.onerror=null;this.src='https://placehold.co/600x400/cccccc/333333?text=Image+Error';">
                    <div class="rosary-mystery-name">${image.name}</div>
                `;
                gridDiv.appendChild(imageContainer);
            });
            albumDiv.appendChild(gridDiv);
            rosaryAlbumsContainer.appendChild(albumDiv);
        });

        const usefulLinksList = document.getElementById('useful-links-list');
        const links = [
            { text: "Daily Readings", url: "https://bible.usccb.org/daily-bible-reading" },
            { text: "Liturgical Calendar", url: "https://www.usccb.org/prayer-and-worship/liturgical-year-and-calendar/proper-calendar" },
            { text: "Papal Intentions 2025", url: "https://www.usccb.org/prayers/popes-monthly-intentions-2025" },
        ];

        links.forEach(link => {
            const listItem = document.createElement('li');
            listItem.className = 'card card-theme-bg card-theme-hover-bg p-4 shadow-md rounded-lg transition-all duration-200 ease-in-out';
            listItem.innerHTML = `
                <a href="${link.url}" target="_blank" rel="noopener noreferrer" class="flex items-center justify-between text-blue-600 dark:text-blue-400 hover:underline font-medium">
                    <span>${link.text}</span>
                    <i class="fas fa-external-link-alt text-sm opacity-70"></i>
                </a>
            `;
            usefulLinksList.appendChild(listItem);
        });

        document.getElementById('currentYear').textContent = new Date().getFullYear();

    </script>
</body>
</html>
